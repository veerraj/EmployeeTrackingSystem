{"ast":null,"code":"import _objectSpread from \"/home/ulcom19/EmployeeTrackingSystem/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/home/ulcom19/EmployeeTrackingSystem/src/TrackanEmployee.js\";\nimport React, { Component } from 'react';\nimport './home.css';\nimport Dashboard from './Dashboard';\nimport \"mapbox-gl/dist/mapbox-gl.css\";\nimport firebase from 'firebase'; //import WebMercatorViewport from 'viewport-mercator-project';\n\nimport Geocoder from 'react-map-gl-geocoder';\nimport MapGL, { Marker, Popup } from \"react-map-gl\";\nconst token = 'pk.eyJ1IjoicmFqdmVlcm1ld2FyYSIsImEiOiJjazRqZ3lnOXQwdnQ4M25td3Rtb21taTR6In0.e2-bSIPzJvsidBf3gWOnGw'; //const employees = []\n\nclass TrackanEmployee extends Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = () => {\n      // const {longitude, latitude, zoom} = new WebMercatorViewport(this.state.viewport)\n      //         .fitBounds([[-122.4, 37.7], [-122.5, 37.8]], {\n      //           padding: 20,\n      //           offset: [0, -100]\n      //         });\n      //     const viewport = {\n      //         ...this.state.viewport,\n      //         longitude,\n      //         latitude,\n      //         zoom,\n      //         transitionDuration: 5000,\n      //         transitionInterpolator: new FlyToInterpolator(),\n      //         transitionEasing: d3.easeCubic\n      //     }\n      //     this.setState({viewport});\n      const db = firebase.firestore();\n      let employees = [];\n      db.collection('EmployeeData').get().then(snapshot => {\n        snapshot.forEach(doc => {\n          const data = doc.data();\n          console.log('********', data); //console.log(data)\n          // this.state.Employees.push(data);\n\n          employees.push(data);\n        }); //console.log(employees);\n        // console.log(employees)\n      });\n      console.log('ddddddddddddddddd', employees);\n      this.setState({\n        Employees: employees\n      }); //console.log(this.state.Employees)\n    };\n\n    this.mapRef = React.createRef();\n\n    this.handleViewportChange = viewport => {\n      console.log('event', viewport);\n      console.log('this.state.viewPort', this.state.viewport);\n      this.setState({\n        viewport: _objectSpread({}, this.state.viewport, viewport)\n      });\n    };\n\n    this.state = {\n      viewport: {\n        width: 1000,\n        height: 900,\n        latitude: 24.5854,\n        longitude: 73.7125,\n        zoom: 6,\n        center: [-96, 37.8]\n      },\n      searchResultLayer: null,\n      Employees: [],\n      show: false\n    };\n  }\n\n  // if you are happy with Geocoder default settings, you can just use handleViewportChange directly\n  // handleGeocoderViewportChange = (viewport) => {\n  //   const geocoderDefaultOverrides = { transitionDuration: 1000 }\n  //   return this.handleViewportChange({\n  //     ...viewport,\n  //     ...geocoderDefaultOverrides\n  //   })\n  // }\n  _renderPopup() {\n    const popupInfo = this.state.popupInfo;\n    return popupInfo ? React.createElement(Popup, {\n      tipSize: 5,\n      anchor: \"top\",\n      longitude: popupInfo.lang,\n      latitude: popupInfo.lat,\n      closeOnClick: false,\n      onClose: () => this.setState({\n        popupInfo: null\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        padding: '12px 8px 12px 8px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, popupInfo.firstName + popupInfo.lastName)) : '';\n  }\n\n  render() {\n    // const { viewport, searchResultLayer} = this.state\n    console.log(this.state.Employees);\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"map-cls\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(MapGL, Object.assign({\n      ref: this.mapRef\n    }, this.state.viewport, {\n      mapStyle: \"mapbox://styles/mapbox/streets-v9\",\n      width: \"100%\",\n      height: \"90%\",\n      onViewportChange: this.handleViewportChange,\n      mapboxApiAccessToken: token,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }),\n    /* <div>\n      <Marker latitude={24.5854} longitude={73.7125} offsetLeft={-20} offsetTop={-10}>\n        <div class=\"mapMarkerStyle\"></div>\n      </Marker>\n      <Marker latitude={26.9124} longitude={75.7873} offsetLeft={-20} offsetTop={-10}>\n        <div class=\"mapMarkerStyle\"></div>\n      </Marker>\n    </div> */\n    React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, this._renderPopup(), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, this.state.Employees.length && this.state.Employees.filter(item => item.lang !== '' && item.lat !== '').map((emp, index) => React.createElement(\"div\", {\n      onClick: () => {\n        this.setState({\n          popupInfo: emp\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(React.Fragment, null, React.createElement(Marker, {\n      key: index,\n      latitude: emp.lat,\n      longitude: emp.lang,\n      offsetLeft: -20,\n      offsetTop: -10,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"mapMarkerStyle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }))))))))), React.createElement(Dashboard, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default TrackanEmployee;","map":{"version":3,"sources":["/home/ulcom19/EmployeeTrackingSystem/src/TrackanEmployee.js"],"names":["React","Component","Dashboard","firebase","Geocoder","MapGL","Marker","Popup","token","TrackanEmployee","constructor","props","componentDidMount","db","firestore","employees","collection","get","then","snapshot","forEach","doc","data","console","log","push","setState","Employees","mapRef","createRef","handleViewportChange","viewport","state","width","height","latitude","longitude","zoom","center","searchResultLayer","show","_renderPopup","popupInfo","lang","lat","padding","firstName","lastName","render","length","filter","item","map","emp","index"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './home.css';\nimport Dashboard from './Dashboard'\nimport \"mapbox-gl/dist/mapbox-gl.css\"\nimport firebase from 'firebase';\n//import WebMercatorViewport from 'viewport-mercator-project';\nimport Geocoder from 'react-map-gl-geocoder'\n\n\nimport MapGL, { Marker, Popup } from \"react-map-gl\";\n\n\n\nconst token = 'pk.eyJ1IjoicmFqdmVlcm1ld2FyYSIsImEiOiJjazRqZ3lnOXQwdnQ4M25td3Rtb21taTR6In0.e2-bSIPzJvsidBf3gWOnGw';\n//const employees = []\n\nclass TrackanEmployee extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n\n      viewport: {\n        width: 1000,\n        height: 900,\n        latitude: 24.5854,\n        longitude: 73.7125,\n        zoom: 6,\n        center: [-96, 37.8],\n\n      },\n      searchResultLayer: null,\n      Employees: [],\n      show: false\n\n    };\n  }\n\n\n\n  componentDidMount = () => {\n    // const {longitude, latitude, zoom} = new WebMercatorViewport(this.state.viewport)\n    //         .fitBounds([[-122.4, 37.7], [-122.5, 37.8]], {\n    //           padding: 20,\n    //           offset: [0, -100]\n    //         });\n    //     const viewport = {\n    //         ...this.state.viewport,\n    //         longitude,\n    //         latitude,\n    //         zoom,\n    //         transitionDuration: 5000,\n    //         transitionInterpolator: new FlyToInterpolator(),\n    //         transitionEasing: d3.easeCubic\n    //     }\n    //     this.setState({viewport});\n\n    const db = firebase.firestore();\n    let employees = [];\n    db.collection('EmployeeData')\n      .get()\n      .then(snapshot => {\n\n        snapshot.forEach(doc => {\n          const data = doc.data()\n          console.log('********', data)\n          //console.log(data)\n          // this.state.Employees.push(data);\n          employees.push(data);\n        })\n        //console.log(employees);\n        // console.log(employees)\n\n      })\n    console.log('ddddddddddddddddd', employees)\n    this.setState({ Employees: employees })\n    //console.log(this.state.Employees)\n\n  }\n\n\n  mapRef = React.createRef()\n  handleViewportChange = viewport => {\n    console.log('event', viewport)\n    console.log('this.state.viewPort', this.state.viewport);\n    this.setState({\n      viewport: { ...this.state.viewport, ...viewport }\n    })\n  }\n\n  // if you are happy with Geocoder default settings, you can just use handleViewportChange directly\n  // handleGeocoderViewportChange = (viewport) => {\n  //   const geocoderDefaultOverrides = { transitionDuration: 1000 }\n\n  //   return this.handleViewportChange({\n  //     ...viewport,\n  //     ...geocoderDefaultOverrides\n  //   })\n  // }\n\n  _renderPopup() {\n    const { popupInfo } = this.state;\n    return popupInfo ? (\n      <Popup\n        tipSize={5}\n        anchor=\"top\"\n        longitude={popupInfo.lang}\n        latitude={popupInfo.lat}\n        closeOnClick={false}\n        onClose={() => this.setState({ popupInfo: null })}\n      >\n        <div style={{ padding: '12px 8px 12px 8px' }}>{popupInfo.firstName + popupInfo.lastName}</div>\n      </Popup>\n    ) : '';\n  }\n\n  render() {\n    // const { viewport, searchResultLayer} = this.state\n    console.log(this.state.Employees)\n    return (\n      <div>\n        <div className=\"map-cls\">\n          <MapGL\n            ref={this.mapRef}\n            {...this.state.viewport}\n            mapStyle=\"mapbox://styles/mapbox/streets-v9\"\n            width=\"100%\"\n            height=\"90%\"\n            onViewportChange={this.handleViewportChange}\n            mapboxApiAccessToken={token}\n          >\n            {/* <Geocoder\n              mapRef={this.mapRef}\n              onViewportChange={this.handleGeocoderViewportChange}\n              mapboxApiAccessToken={token}\n            ></Geocoder> */}\n\n            {\n              /* <div>\n                <Marker latitude={24.5854} longitude={73.7125} offsetLeft={-20} offsetTop={-10}>\n                  <div class=\"mapMarkerStyle\"></div>\n                </Marker>\n                <Marker latitude={26.9124} longitude={75.7873} offsetLeft={-20} offsetTop={-10}>\n                  <div class=\"mapMarkerStyle\"></div>\n                </Marker>\n              </div> */\n              <div>\n                {this._renderPopup()}\n                <div>\n                  {this.state.Employees.length &&\n                    this.state.Employees.filter(item => item.lang !== '' && item.lat !== '').map((emp, index) => (\n                      <div onClick={() => { this.setState({ popupInfo: emp }) }}>\n                        <>\n                          <Marker key={index} latitude={emp.lat} longitude={emp.lang} offsetLeft={-20} offsetTop={-10}>\n                            <div className=\"mapMarkerStyle\"></div>\n                          </Marker>\n                        </>\n                      </div>\n                    ))}\n                </div>\n              </div>\n            }\n          </MapGL>\n        </div>\n        <Dashboard />\n      </div>\n    )\n  }\n}\n\nexport default TrackanEmployee;"]},"metadata":{},"sourceType":"module"}